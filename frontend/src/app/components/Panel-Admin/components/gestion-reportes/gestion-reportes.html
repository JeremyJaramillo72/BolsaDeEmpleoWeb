<div class="page-container">

  <h1>Gestión de Reportes</h1>

  <!-- TABS -->
  <div class="tabs-container">
    <button type="button"
            class="tab-button"
            [class.active]="tipoReporte==='ofertas'"
            (click)="cambiarTipoReporte('ofertas')">
      Ofertas
    </button>

    <button type="button"
            class="tab-button"
            [class.active]="tipoReporte==='postulaciones'"
            (click)="cambiarTipoReporte('postulaciones')">
      Postulaciones
    </button>

    <button type="button"
            class="tab-button"
            [class.active]="tipoReporte==='usuarios'"
            (click)="cambiarTipoReporte('usuarios')">
      Usuarios
    </button>
  </div>

  <!-- FILTROS -->
  <div class="section-card">

    <!-- OFERTAS -->
    <div *ngIf="tipoReporte==='ofertas'" class="form-grid-4">

      <input class="form-control"
             placeholder="Estado"
             [(ngModel)]="filtrosOfertas.estado">

      <input class="form-control"
             placeholder="Categoría"
             [(ngModel)]="filtrosOfertas.categoria">

      <input class="form-control"
             placeholder="Ciudad"
             [(ngModel)]="filtrosOfertas.ciudad">

    </div>

    <!-- POSTULACIONES -->
    <div *ngIf="tipoReporte==='postulaciones'" class="form-grid-4">

      <input class="form-control"
             placeholder="Estado Validación"
             [(ngModel)]="filtrosPostulaciones.estadoValidacion">

    </div>

    <!-- USUARIOS -->
    <div *ngIf="tipoReporte==='usuarios'" class="form-grid-4">

      <input class="form-control"
             placeholder="Correo"
             [(ngModel)]="filtrosUsuarios.correo">

    </div>

    <!-- BOTONES -->
    <div class="actions-row">
      <button type="button"
              class="btn-secondary"
              (click)="limpiar()">
        Limpiar
      </button>

      <button type="button"
              class="btn-primary"
              [disabled]="cargando"
              (click)="vistaPrevia()">
        {{ cargando ? 'Cargando...' : 'Vista previa' }}
      </button>

      <button type="button"
              class="btn-success"
              [disabled]="resultados.length===0"
              (click)="exportarPDF()">
        Exportar PDF
      </button>
    </div>

  </div>

  <!-- MENSAJE ERROR -->
  <div *ngIf="mensajeError" class="error-message">
    {{ mensajeError }}
  </div>

  <!-- RESULTADOS -->
  <div *ngIf="mostrandoResultados">

    <p>{{ resultados.length }} registros encontrados</p>

    <table class="data-table" *ngIf="resultados.length > 0">
      <thead>
      <tr>
        <th *ngFor="let col of columnas">
          {{ col }}
        </th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let fila of resultados">
        <td *ngFor="let col of columnas">
          {{ fila[col] }}
        </td>
      </tr>
      </tbody>
    </table>

  </div>

</div>
