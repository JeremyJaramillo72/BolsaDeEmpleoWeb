<div class="section-card">
  <div class="section-header">
    <h3>
      <span class="section-icon"></span>
      Experiencia Laboral
    </h3>
  </div>

  <!-- Secci贸n de Cargos -->
  <div class="cargo-section">
    <h4 class="subsection-title">
      <span class="material-icons">badge</span>
      Cargos Desempe帽ados
    </h4>

    <div class="cargo-input-group">
      <div class="form-group cargo-select">
        <label>Seleccionar Cargo *</label>
        <select [(ngModel)]="cargoActual" class="form-control">
          <option [ngValue]="null" disabled>Seleccionar cargo...</option>
          <option *ngFor="let cargo of cargosDisponibles" [value]="cargo.idCargo">
            {{ cargo.nombreCargo }}
          </option>
        </select>
      </div>

      <button type="button" class="btn-add-cargo" (click)="agregarCargoTemporal()">
        <span class="material-icons">add</span>
        Agregar Cargo
      </button>
    </div>

    <!-- Lista de Cargos Temporales -->
    <div class="cargos-list" *ngIf="cargosTemporales.length > 0">
      <div class="cargo-chip" *ngFor="let cargo of cargosTemporales; let i = index">
        <span class="cargo-chip-text">{{ cargo.nombre_cargo }}</span>
        <button type="button" class="cargo-chip-remove" (click)="eliminarCargoTemporal(i)">
          <span class="material-icons">close</span>
        </button>
      </div>
    </div>

    <div class="empty-cargos" *ngIf="cargosTemporales.length === 0">
      <span class="material-icons">work_outline</span>
      <p>No se han agregado cargos. Agregue al menos un cargo para continuar.</p>
    </div>
  </div>

  <hr class="section-divider">

  <!-- Formulario de Experiencia -->
  <div class="form-grid">
    <div class="form-group">
      <label>Empresa *</label>
      <select [(ngModel)]="nuevaExperiencia.id_empresa_catalogo" class="form-control">
        <option [ngValue]="null" disabled>Seleccionar empresa...</option>
        <option *ngFor="let empresa of empresasDisponibles" [value]="empresa.idEmpresa">
          {{ empresa.nombreEmpresa }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label>Ubicaci贸n</label>
      <input
        type="text"
        [(ngModel)]="nuevaExperiencia.ubicacion"
        class="form-control"
        placeholder="Ej: Quito, Ecuador">
    </div>

    <div class="form-group">
      <label>Fecha de Inicio *</label>
      <input
        type="date"
        [(ngModel)]="nuevaExperiencia.fecha_inicio"
        class="form-control">
    </div>

    <div class="form-group">
      <label>Fecha de Fin</label>
      <input
        type="date"
        [(ngModel)]="nuevaExperiencia.fecha_fin"
        class="form-control"
        placeholder="Dejar vac铆o si a煤n trabaja aqu铆">
    </div>

    <div class="form-group">
      <label>Fecha de Registro</label>
      <input
        type="date"
        [(ngModel)]="nuevaExperiencia.fecha_registro"
        class="form-control">
    </div>
  </div>

  <div class="form-group full-width">
    <label>Descripci贸n de Funciones *</label>
    <textarea
      [(ngModel)]="nuevaExperiencia.descripcion"
      class="form-control"
      rows="4"
      placeholder="Describa sus responsabilidades y logros en este puesto..."></textarea>
  </div>

  <div class="actions-row">
    <button type="button" class="btn-attach" (click)="fileInput.click()">
      <span class="material-icons">attach_file</span>
      {{ nuevaExperiencia.nombreArchivo || 'Adjuntar Comprobante' }}
    </button>
    <input #fileInput type="file" (change)="onFileSelected($event)" hidden accept=".pdf,.jpg,.png">

    <button (click)="agregarExperiencia()" class="btn-add-list" type="button">
      <span class="material-icons">add</span>
      Agregar Experiencia
    </button>
  </div>

  <hr class="section-divider">

  <div class="docs-title">
    <span class="material-icons">work_history</span>
    Experiencias Registradas
  </div>

  <div *ngIf="perfil.experiencias && perfil.experiencias.length === 0" class="empty-state">
    <span class="material-icons">work_outline</span>
    <p>No hay experiencias laborales registradas</p>
  </div>

  <div *ngFor="let item of perfil.experiencias; let i = index" class="doc-card">
    <div class="doc-info">
      <p class="doc-name">{{ item.nombre_cargo }} - {{ item.nombre_empresa }}</p>
      <p class="doc-detail"><strong>Per铆odo:</strong> {{ item.fecha_inicio | date: 'MM/yyyy' }} - {{ item.fecha_fin ? (item.fecha_fin | date: 'MM/yyyy') : 'Actualidad' }}</p>
      <p class="doc-detail" *ngIf="item.ubicacion"><strong>Ubicaci贸n:</strong> {{ item.ubicacion }}</p>
      <p class="doc-detail"><strong>Descripci贸n:</strong> {{ item.descripcion }}</p>
      <p class="doc-detail" *ngIf="item.nombreArchivo">
        <strong>Comprobante:</strong> {{ item.nombreArchivo }}
      </p>
    </div>
    <div class="doc-actions">
      <button class="btn-delete" (click)="eliminarExperiencia(i)" type="button" title="Eliminar">
        <span class="material-icons">delete</span>
      </button>
    </div>
  </div>
</div>
